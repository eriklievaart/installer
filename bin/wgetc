#!/bin/sh
set -e


die() {
    echo >&2 "$@"
    exit 1
}

parents() {
	mkdir -pv $(dirname "$1")
}




[ "$#" -ge 3 ] || die "3 arguments required: [CACHE_FILE] [URL] [FILE]..."
cache=$1
url=$2




if [ ! -f $cache ]
then
	parents $cache
	wget $url -O $cache
fi

shift 2
for file in "$@"
do
	parents $file
	cp -v $cache $file
done







