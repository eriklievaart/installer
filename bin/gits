#!/bin/sh
# script to run git commands on multiple git repos simultaneously

YELLOW='\033[1;33m'
PLAIN='\033[0m'

for dir in $(ls ~/Development/git)
do
	cd ~/Development/git/$dir
	if [ ! -d ".git" ]; then
		continue
	fi

	color=""
	branch=$(git status | sed '/^On branch.*/!d; s/^On branch //')
	untracked=$(git status | sed '/^Untracked.*/!d; s/ntracked.*//')
	changes=$(git status | sed '/^Changes.*/!d; s/hanges.*//')
	
	if [ ! -z "$untracked$changes" ]; then
		color=$YELLOW
	fi
	
	echo "$color$dir [$branch] $untracked$changes$PLAIN"

	if [ "$#" -gt 0 ]; then
		git "$@"
		echo
	fi
done

# https://github.com/StreakyCobra/gws

